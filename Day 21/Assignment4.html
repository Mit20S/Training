<html>
<head>
    <title>Assignment-4</title>
</head>
<body>
<h3>Asynchronous Programming in  JavaScript</h3>
	<hr/> 
	
	<button  onclick="fn_getData()">Show Data </button>
	<br/><br/>
	<table  id="table1"  border="1"  width="500"  cellpadding="10" cellspacing="0" align = "center">
        <tr>
                <th>ID</th>
                <th>Email</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Avatar</th>
        </tr>
    </table>
	 
	 
	<script>	 

	function fn_getData()
	{ 
		let url = "https://reqres.in/api/users";
		
		fetch(url).then(  (response)  => 
		{
			response.json().then((resData)  =>  
			{ 
                    // console.log(resData);
					displayData(resData.data);
			});
		})
        .catch((error) => {
                tableObj.innerHTML += `<tr><td colspan='5' align=center> ${error} </td></tr>`
            });

	}  
	
	
	function  displayData( dataArray )
	{
        var str  = " ";
        // for(var i = 1;i<tableObj.rows.length;)
        // {
        //     tableObj.deleteRow(i);
        // }
        
        for( var item of dataArray )
        { 
			str  +=  "<tr>";	
            str  +=  "<td>" +   item.id + "</td>";	
            str  +=  "<td>" +   item.email + "</td>";	
            str  +=  "<td>" +   item.first_name + "</td>";	
            str  +=  "<td>" +   item.last_name + "</td>";	
            str  +=  "<td><img src = '" +   item.avatar + "'/></td>";	
            // str  +=  "<td>" +   item.name + "</td>";	
            // str  +=  "<td>" +   item.job + "</td>";	
            str  +=  "</tr>";	
		}
		var tableObj = document.getElementById("table1");			 	
        tableObj.innerHTML += str;

    }    
	
	</script>	 
</body>
</html>




